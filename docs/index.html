<!DOCTYPE html>
<html>
<head>
	<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<title>Chart using XML Data</title>
<!-- Import JQuery Right now to avoid errors -->
	<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/d3js/3.5.17/d3.min.js" charset="utf-8"></script>
<script src="https://cdn.jsdelivr.net/npm/taucharts@1/build/production/tauCharts.min.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/taucharts@1/build/production/tauCharts.min.css">
<script type="text/javascript">
    window.onload = function() {
        var dataPoints = [];
	 
        function getDataPointsFromCSV(csv, column) {
            var dataPoints = csvLines = points = [];
            csvLines = csv.split(/[\r?\n|\r|\n]+/);
            for (var i = 0; i < csvLines.length; i++)
                if (csvLines[i].length > 0) {
                    points = csvLines[i].split(",");
                    var y_axis_data = (points[column]);
                    if (y_axis_data == "NaN"){
                    	y_axis_data = "0"
                    }
                    dataPoints.push({
                        y_axis: parseFloat((y_axis_data).slice(1, (points[1]).length - 1)),
                        x_axis: parseFloat(i)
                    });
                }
            return dataPoints;
        }
	
	jQuery.get("https://rawgit.com/jschmidtnj/MobileWeatherStation/master/data/current_data_file.csv?xstart=5&ystart=10&length=10&type=csv", function(data) {
		var column = 0;
		var windspeed_chart = new tauCharts.Chart({
			data: getDataPointsFromCSV(data, column),           
            y: 'y_axis',
            x: 'x_axis',
            type: 'line',
            guide:{
              padding:{l:70, t:10, b:70,r:10},
              showGridLines:'xy',
              y:{
                label:{
                  text:'WindSpeed (mph)',
                  padding:-15
                }
              },
              x:{
                label:'Count',
              }
            },
            plugins: [
		        tauCharts.api.plugins.get('tooltip')()
		    ]
        });
        windspeed_chart.renderTo('#windspeed');
	});

  jQuery.get("https://rawgit.com/jschmidtnj/MobileWeatherStation/master/data/current_data_file.csv?xstart=5&ystart=10&length=10&type=csv", function(data) {
    var column = 1;
    var humidity_chart = new tauCharts.Chart({
      data: getDataPointsFromCSV(data, column),           
            y: 'y_axis',
            x: 'x_axis',
            type: 'line',
            guide:{
              padding:{l:70, t:10, b:70,r:10},
              showGridLines:'xy',
              y:{
                label:{
                  text:'humidity',
                  padding:-15
                }
              },
              x:{
                label:'Count',
              }
            },
            plugins: [
            tauCharts.api.plugins.get('tooltip')()
        ]
        });
        humidity_chart.renderTo('#humidity');
  });

  jQuery.get("https://rawgit.com/jschmidtnj/MobileWeatherStation/master/data/current_data_file.csv?xstart=5&ystart=10&length=10&type=csv", function(data) {
    var column = 2;
    var temp_1_chart = new tauCharts.Chart({
      data: getDataPointsFromCSV(data, column),           
            y: 'y_axis',
            x: 'x_axis',
            type: 'line',
            guide:{
              padding:{l:70, t:10, b:70,r:10},
              showGridLines:'xy',
              y:{
                label:{
                  text:'temp_1 (F)',
                  padding:-15
                }
              },
              x:{
                label:'Count',
              }
            },
            plugins: [
            tauCharts.api.plugins.get('tooltip')()
        ]
        });
        temp_1_chart.renderTo('#temp_1');
  });

  jQuery.get("https://rawgit.com/jschmidtnj/MobileWeatherStation/master/data/current_data_file.csv?xstart=5&ystart=10&length=10&type=csv", function(data) {
    var column = 3;
    var temp_2_chart = new tauCharts.Chart({
      data: getDataPointsFromCSV(data, column),           
            y: 'y_axis',
            x: 'x_axis',
            type: 'line',
            guide:{
              padding:{l:70, t:10, b:70,r:10},
              showGridLines:'xy',
              y:{
                label:{
                  text:'Temp 2 (F)',
                  padding:-15
                }
              },
              x:{
                label:'Count',
              }
            },
            plugins: [
            tauCharts.api.plugins.get('tooltip')()
        ]
        });
        temp_2_chart.renderTo('#temp_2');
  });

  jQuery.get("https://rawgit.com/jschmidtnj/MobileWeatherStation/master/data/current_data_file.csv?xstart=5&ystart=10&length=10&type=csv", function(data) {
    var column = 4;
    var avg_temp_chart = new tauCharts.Chart({
      data: getDataPointsFromCSV(data, column),           
            y: 'y_axis',
            x: 'x_axis',
            type: 'line',
            guide:{
              padding:{l:70, t:10, b:70,r:10},
              showGridLines:'xy',
              y:{
                label:{
                  text:'avg_temp (F)',
                  padding:-15
                }
              },
              x:{
                label:'Count',
              }
            },
            plugins: [
            tauCharts.api.plugins.get('tooltip')()
        ]
        });
        avg_temp_chart.renderTo('#avg_temp');
  });

  jQuery.get("https://rawgit.com/jschmidtnj/MobileWeatherStation/master/data/current_data_file.csv?xstart=5&ystart=10&length=10&type=csv", function(data) {
    var column = 5;
    var altitude_chart = new tauCharts.Chart({
      data: getDataPointsFromCSV(data, column),           
            y: 'y_axis',
            x: 'x_axis',
            type: 'line',
            guide:{
              padding:{l:70, t:10, b:70,r:10},
              showGridLines:'xy',
              y:{
                label:{
                  text:'altitude (m)',
                  padding:-15
                }
              },
              x:{
                label:'Count',
              }
            },
            plugins: [
            tauCharts.api.plugins.get('tooltip')()
        ]
        });
        altitude_chart.renderTo('#altitude');
  });

  jQuery.get("https://rawgit.com/jschmidtnj/MobileWeatherStation/master/data/current_data_file.csv?xstart=5&ystart=10&length=10&type=csv", function(data) {
    var column = 5;
    var pressure_chart = new tauCharts.Chart({
      data: getDataPointsFromCSV(data, column),           
            y: 'y_axis',
            x: 'x_axis',
            type: 'line',
            guide:{
              padding:{l:70, t:10, b:70,r:10},
              showGridLines:'xy',
              y:{
                label:{
                  text:'pressure (Pa)',
                  padding:-15
                }
              },
              x:{
                label:'Count',
              }
            },
            plugins: [
            tauCharts.api.plugins.get('tooltip')()
        ]
        });
        pressure_chart.renderTo('#pressure');
    });
  }
</script>
<style>
.graph_styling {
  width: 635px;
  height: 400px;
  margin: 150;
  padding: 50;
  float: left;
}

</style>
</head>
<body>
	<div id="windspeed" class="graph_styling"></div>
  <br/>
  <br/>
  <br/>
  <div id="humidity" class="graph_styling"></div>
  <br/>
  <br/>
  <br/>
  <div id="temp_1" class="graph_styling"></div>
  <br/>
  <br/>
  <br/>
  <div id="temp_2" class="graph_styling"></div>
  <br/>
  <br/>
  <br/>
  <div id="avg_temp" class="graph_styling"></div>
  <br/>
  <br/>
  <br/>
  <div id="altitude" class="graph_styling"></div>
  <br/>
  <br/>
  <br/>
  <div id="pressure" class="graph_styling"></div>
  <br/>
  <br/>
  <br/>
</body>
</html>
